#include <iostream>
#include <fstream>
#include <ctype.h>
using namespace std;

int main() {
    system("chcp 1251");
    //Задание №1
    cout << "Задание №1\n";
    float m, S, n;
    double p;
    cout << "Введите размер займа, количество лет и процент:\n";
    cin >> S >> n >> p;
    if ((p < 0) or (n <= 0) or (S <= 0)) {
        cout << "Данные введены некорректно\n";
    }
    else {
        if (p == 0) {
            cout << "Значение месячной выплаты равно " << S / n << "\n";
        }
        else {
            m = (S * p / 100 * pow((1 + p / 100), n)) / (12 * pow((1 + p / 100), n) - 12);
            cout << "Значение месячной выплаты равно " << m << "\n";
        }
    }
    //Задание №2
    cout << "Задание №2\n";
    float k = 0;
    p = 0;
    cout << "Введите размер займа, размер месячной выплаты и количество лет:\n";
    cin >> S >> m >> n;
    if (m == (S / n)) {
        cout << "Значение p равно нулю\n";
    }
    else {
        while (abs(k - m)>0.01) {
            p = p + 0.001;
            k = (S * p / 100 * pow((1 + p / 100), n)) / (12 * pow((1 + p / 100), n) - 12);
            if ((S == 0) or (m == 0) or (n == 0) or (m >= S)) {
                break;
            }
        }
        if ((S == 0) or (m == 0) or (n == 0) or (m >= S)) {
            cout << "данные введены не корректно\n";
        }
        else {
            cout << "процент равен " << p << "\n";
        }
    }
    //Задание №3
    cout << "Задание №3\n";
    char stroka[100];
    ofstream fileout("file.txt");
    fileout << "Строка для третьего задания1234\n";
    fileout.close();
    ifstream filein("file.txt");
    if (!filein.is_open()) {
        cout << "Файл не может быть открыт\n";
    }
    else {
        filein.getline(stroka, 100);
        filein.close();
        cout << stroka << "\n";
    }
    //Задание №4
    cout << "Задание №4\n";
    char stroka4[100];
    ifstream filein4("file.txt");
    if (!filein4.is_open()) {
        cout << "Файл не может быть открыт\n";
    }
    else {
        filein4.getline(stroka4, 100);
        filein4.close();
        for (int i = 0; i < 100; i++) {
            if (isdigit(stroka4[i])) {
                cout << stroka4[i] << "\n";
            }
        }
    }
}
