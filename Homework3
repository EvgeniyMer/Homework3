#include <iostream>
#include <fstream>
#include <ctype.h>
#include <string>
#include <Windows.h>
using namespace std;

int main() {
    system("chcp 1251");
    //Задание №1
    cout << "Задание №1\n";
    double m, S, n;
    double p;
    cout << "Введите размер займа, количество лет и процент:\n";
    cin >> S >> n >> p;
    if ((p < 0) or (n <= 0) or (S <= 0)) {
        cout << "Данные введены некорректно\n";
    } else {
        if (p == 0) {
            cout << "Значение месячной выплаты равно " << S / n << "\n";
        } else {
            m = (S * p / 100 * pow((1 + p / 100), n)) / (12 * pow((1 + p / 100), n) - 12);
            cout << "Значение месячной выплаты равно " << m << "\n";
        }
    }
    //Задание №2
    cout << "Задание №2\n";
    double k = 0;
    p = 0;
    cout << "Введите размер займа, размер месячной выплаты и количество лет:\n";
    cin >> S >> m >> n;
    if ((S == 0) or (m == 0) or (n == 0) or (m >= S)) {
        cout << "данные введены не корректно\n";
    } else {
        if (m == (S / n)) {
            cout << "Значение p равно нулю\n";
        } else {
            while (abs(k - m) > 0.1) {
                p = p + 0.001;
                k = (S * p / 100 * pow((1 + p / 100), n)) / (12 * pow((1 + p / 100), n) - 12);
            }
            cout << "процент равен " << p << "\n";
        }
    }
    //Задание №3
    cout << "Задание №3\n";
    char stroka[100];
    ofstream fileout("file.txt");
    fileout << "stroka dlya tretego zadaniya1234\n";
    fileout.close();
    ifstream filein("file.txt");
    if (!filein.is_open()) {
        cout << "Файл не может быть открыт\n";
    } else {
        filein.getline(stroka, 100);
        filein.close();
        cout << stroka << "\n";
    }
    //Задание №4
    cout << "Задание №4\n";
    string stroka4;
    ifstream filein4("file.txt");
    if (!filein4.is_open()) {
        cout << "Файл не может быть открыт\n";
    } else {
        getline(filein4, stroka4);
        filein4.close();
        for (int i = 0; i < stroka4.length(); i++) {
            if (isdigit(stroka4[i])) {
                cout << stroka4[i];
            }
        }
    }
    //Задание №5
    string stroka5 = "hdktyxnejdosmtevtdubqmaitbdteb";
    while (k < 29) {
        int k = 0;
        for (int i = 0; i < (stroka5.size()-1); i++) {
            if (stroka5[i] < stroka5[i + 1]) {
                k++;
            }
            else {
                int p = stroka5[i + 1];
                stroka5[i + 1] = stroka5[i];
                stroka5[i] = p;
            }
        }
    }
    cout << '\n' << stroka5;
}
